/*! Backstretch - v2.0.1 - 2012-10-01
* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2012 Scott Robbin; Licensed MIT */(function(e,t,n){"use strict";e.fn.backstretch=function(r,s){(r===n||r.length===0)&&e.error("No images were supplied for Backstretch");e(t).scrollTop()===0&&t.scrollTo(0,0);return this.each(function(){var t=e(this),n=t.data("backstretch");if(n){s=e.extend(n.options,s);n.destroy(!0)}n=new i(this,r,s);t.data("backstretch",n)})};e.backstretch=function(t,n){return e("body").backstretch(t,n).data("backstretch")};e.expr[":"].backstretch=function(t){return e(t).data("backstretch")!==n};e.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var r={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},img:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxWidth:"none",zIndex:-999999}},i=function(n,i,o){this.options=e.extend({},e.fn.backstretch.defaults,o||{});this.images=e.isArray(i)?i:[i];e.each(this.images,function(){e("<img />")[0].src=this});this.isBody=n===document.body;this.$container=e(n);this.$wrap=e('<div class="backstretch"></div>').css(r.wrap).appendTo(this.$container);this.$root=this.isBody?s?e(t):e(document):this.$container;if(!this.isBody){var u=this.$container.css("position"),a=this.$container.css("zIndex");this.$container.css({position:u==="static"?"relative":u,zIndex:a==="auto"?0:a,background:"none"});this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&s?"fixed":"absolute"});this.index=0;this.show(this.index);e(t).on("resize.backstretch",e.proxy(this.resize,this)).on("orientationchange.backstretch",e.proxy(function(){if(this.isBody&&t.pageYOffset===0){t.scrollTo(0,1);this.resize()}},this))};i.prototype={resize:function(){try{var e={left:0,top:0},n=this.isBody?this.$root.width():this.$root.innerWidth(),r=n,i=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),s=r/this.$img.data("ratio"),o;if(s>=i){o=(s-i)/2;this.options.centeredY&&(e.top="-"+o+"px")}else{s=i;r=s*this.$img.data("ratio");o=(r-n)/2;this.options.centeredX&&(e.left="-"+o+"px")}this.$wrap.css({width:n,height:i}).find("img:not(.deleteable)").css({width:r,height:s}).css(e)}catch(u){}return this},show:function(t){if(Math.abs(t)>this.images.length-1)return;this.index=t;var n=this,i=n.$wrap.find("img").addClass("deleteable"),s=e.Event("backstretch.show",{relatedTarget:n.$container[0]});clearInterval(n.interval);n.$img=e("<img />").css(r.img).bind("load",function(t){var r=this.width||e(t.target).width(),o=this.height||e(t.target).height();e(this).data("ratio",r/o);n.resize();e(this).fadeIn(n.options.speed||n.options.fade,function(){i.remove();n.paused||n.cycle();n.$container.trigger(s)})}).appendTo(n.$wrap);n.$img.attr("src",n.images[t]);return n},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(this.index===0?this.images.length-1:this.index-1)},pause:function(){this.paused=!0;return this},resume:function(){this.paused=!1;this.next();return this},cycle:function(){if(this.images.length>1){clearInterval(this.interval);this.interval=setInterval(e.proxy(function(){this.paused||this.next()},this),this.options.duration)}return this},destroy:function(n){e(t).off("resize.backstretch orientationchange.backstretch");clearInterval(this.interval);n||this.$wrap.remove();this.$container.removeData("backstretch")}};var s=function(){var e=navigator.userAgent,n=navigator.platform,r=e.match(/AppleWebKit\/([0-9]+)/),i=!!r&&r[1],s=e.match(/Fennec\/([0-9]+)/),o=!!s&&s[1],u=e.match(/Opera Mobi\/([0-9]+)/),a=!!u&&u[1],f=e.match(/MSIE ([0-9]+)/),l=!!f&&f[1];return!((n.indexOf("iPhone")>-1||n.indexOf("iPad")>-1||n.indexOf("iPod")>-1)&&i&&i<534||t.operamini&&{}.toString.call(t.operamini)==="[object OperaMini]"||u&&a<7458||e.indexOf("Android")>-1&&i&&i<533||o&&o<6||"palmGetResource"in t&&i&&i<534||e.indexOf("MeeGo")>-1&&e.indexOf("NokiaBrowser/8.5.0")>-1||l&&l<=6)}()})(jQuery,window);(function(e,t,n){"use strict";var r=e.document,i=e.Modernizr,s=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},o="Moz Webkit O Ms".split(" "),u=function(e){var t=r.documentElement.style,n;if(typeof t[e]=="string")return e;e=s(e);for(var i=0,u=o.length;i<u;i++){n=o[i]+e;if(typeof t[n]=="string")return n}},a=u("transform"),f=u("transitionProperty"),l={csstransforms:function(){return!!a},csstransforms3d:function(){var e=!!u("perspective");if(e){var n=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),r="@media ("+n.join("transform-3d),(")+"modernizr)",i=t("<style>"+r+"{#modernizr{height:3px}}"+"</style>").appendTo("head"),s=t('<div id="modernizr" />').appendTo("html");e=s.height()===3,s.remove(),i.remove()}return e},csstransitions:function(){return!!f}},c;if(i)for(c in l)i.hasOwnProperty(c)||i.addTest(c,l[c]);else{i=e.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var h=" ",p;for(c in l)p=l[c](),i[c]=p,h+=" "+(p?"":"no-")+c;t("html").addClass(h)}if(i.csstransforms){var d=i.csstransforms3d?{translate:function(e){return"translate3d("+e[0]+"px, "+e[1]+"px, 0) "},scale:function(e){return"scale3d("+e+", "+e+", 1) "}}:{translate:function(e){return"translate("+e[0]+"px, "+e[1]+"px) "},scale:function(e){return"scale("+e+") "}},v=function(e,n,r){var i=t.data(e,"isoTransform")||{},s={},o,u={},f;s[n]=r,t.extend(i,s);for(o in i)f=i[o],u[o]=d[o](f);var l=u.translate||"",c=u.scale||"",h=l+c;t.data(e,"isoTransform",i),e.style[a]=h};t.cssNumber.scale=!0,t.cssHooks.scale={set:function(e,t){v(e,"scale",t)},get:function(e,n){var r=t.data(e,"isoTransform");return r&&r.scale?r.scale:1}},t.fx.step.scale=function(e){t.cssHooks.scale.set(e.elem,e.now+e.unit)},t.cssNumber.translate=!0,t.cssHooks.translate={set:function(e,t){v(e,"translate",t)},get:function(e,n){var r=t.data(e,"isoTransform");return r&&r.translate?r.translate:[0,0]}}}var m,g;i.csstransitions&&(m={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[f],g=u("transitionDuration"));var y=t.event,b;y.special.smartresize={setup:function(){t(this).bind("resize",y.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",y.special.smartresize.handler)},handler:function(e,t){var n=this,r=arguments;e.type="smartresize",b&&clearTimeout(b),b=setTimeout(function(){jQuery.event.handle.apply(n,r)},t==="execAsap"?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Isotope=function(e,n,r){this.element=t(n),this._create(e),this._init(r)};var w=["width","height"],E=t(e);t.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!0,itemPositionDataEnabled:!1},t.Isotope.prototype={_create:function(e){this.options=t.extend({},t.Isotope.settings,e),this.styleQueue=[],this.elemCount=0;var n=this.element[0].style;this.originalStyle={};var r=w.slice(0);for(var i in this.options.containerStyle)r.push(i);for(var s=0,o=r.length;s<o;s++)i=r[s],this.originalStyle[i]=n[i]||"";this.element.css(this.options.containerStyle),this._updateAnimationEngine(),this._updateUsingTransforms();var u={"original-order":function(e,t){return t.elemCount++,t.elemCount},random:function(){return Math.random()}};this.options.getSortData=t.extend(this.options.getSortData,u),this.reloadItems(),this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var a=this;setTimeout(function(){a.element.addClass(a.options.containerClass)},0),this.options.resizable&&E.bind("smartresize.isotope",function(){a.resize()}),this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(e){var t=this.options.itemSelector,n=t?e.filter(t).add(e.find(t)):e,r={position:"absolute"};return n=n.filter(function(e,t){return t.nodeType===1}),this.usingTransforms&&(r.left=0,r.top=0),n.css(r).addClass(this.options.itemClass),this.updateSortData(n,!0),n},_init:function(e){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(e)},option:function(e){if(t.isPlainObject(e)){this.options=t.extend(!0,this.options,e);var n;for(var r in e)n="_update"+s(r),this[n]&&this[n]()}},_updateAnimationEngine:function(){var e=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,""),t;switch(e){case"css":case"none":t=!1;break;case"jquery":t=!0;break;default:t=!i.csstransitions}this.isUsingJQueryAnimation=t,this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var e=this.usingTransforms=this.options.transformsEnabled&&i.csstransforms&&i.csstransitions&&!this.isUsingJQueryAnimation;e||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale),this.getPositionStyles=e?this._translate:this._positionAbs},_filter:function(e){var t=this.options.filter===""?"*":this.options.filter;if(!t)return e;var n=this.options.hiddenClass,r="."+n,i=e.filter(r),s=i;if(t!=="*"){s=i.filter(t);var o=e.not(r).not(t).addClass(n);this.styleQueue.push({$el:o,style:this.options.hiddenStyle})}return this.styleQueue.push({$el:s,style:this.options.visibleStyle}),s.removeClass(n),e.filter(t)},updateSortData:function(e,n){var r=this,i=this.options.getSortData,s,o;e.each(function(){s=t(this),o={};for(var e in i)!n&&e==="original-order"?o[e]=t.data(this,"isotope-sort-data")[e]:o[e]=i[e](s,r);t.data(this,"isotope-sort-data",o)})},_sort:function(){var e=this.options.sortBy,t=this._getSorter,n=this.options.sortAscending?1:-1,r=function(r,i){var s=t(r,e),o=t(i,e);return s===o&&e!=="original-order"&&(s=t(r,"original-order"),o=t(i,"original-order")),(s>o?1:s<o?-1:0)*n};this.$filteredAtoms.sort(r)},_getSorter:function(e,n){return t.data(e,"isotope-sort-data")[n]},_translate:function(e,t){return{translate:[e,t]}},_positionAbs:function(e,t){return{left:e,top:t}},_pushPosition:function(e,t,n){t=Math.round(t+this.offset.left),n=Math.round(n+this.offset.top);var r=this.getPositionStyles(t,n);this.styleQueue.push({$el:e,style:r}),this.options.itemPositionDataEnabled&&e.data("isotope-item-position",{x:t,y:n})},layout:function(e,t){var n=this.options.layoutMode;this["_"+n+"Layout"](e);if(this.options.resizesContainer){var r=this["_"+n+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:r})}this._processStyleQueue(e,t),this.isLaidOut=!0},_processStyleQueue:function(e,n){var r=this.isLaidOut?this.isUsingJQueryAnimation?"animate":"css":"css",s=this.options.animationOptions,o=this.options.onLayout,u,a,f,l;a=function(e,t){t.$el[r](t.style,s)};if(this._isInserting&&this.isUsingJQueryAnimation)a=function(e,t){u=t.$el.hasClass("no-transition")?"css":r,t.$el[u](t.style,s)};else if(n||o||s.complete){var c=!1,h=[n,o,s.complete],p=this;f=!0,l=function(){if(c)return;var t;for(var n=0,r=h.length;n<r;n++)t=h[n],typeof t=="function"&&t.call(p.element,e,p);c=!0};if(this.isUsingJQueryAnimation&&r==="animate")s.complete=l,f=!1;else if(i.csstransitions){var d=0,v=this.styleQueue[0],y=v&&v.$el,b;while(!y||!y.length){b=this.styleQueue[d++];if(!b)return;y=b.$el}var w=parseFloat(getComputedStyle(y[0])[g]);w>0&&(a=function(e,t){t.$el[r](t.style,s).one(m,l)},f=!1)}}t.each(this.styleQueue,a),f&&l(),this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(e){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,e)},addItems:function(e,t){var n=this._getAtoms(e);this.$allAtoms=this.$allAtoms.add(n),t&&t(n)},insert:function(e,t){this.element.append(e);var n=this;this.addItems(e,function(e){var r=n._filter(e);n._addHideAppended(r),n._sort(),n.reLayout(),n._revealAppended(r,t)})},appended:function(e,t){var n=this;this.addItems(e,function(e){n._addHideAppended(e),n.layout(e),n._revealAppended(e,t)})},_addHideAppended:function(e){this.$filteredAtoms=this.$filteredAtoms.add(e),e.addClass("no-transition"),this._isInserting=!0,this.styleQueue.push({$el:e,style:this.options.hiddenStyle})},_revealAppended:function(e,t){var n=this;setTimeout(function(){e.removeClass("no-transition"),n.styleQueue.push({$el:e,style:n.options.visibleStyle}),n._isInserting=!1,n._processStyleQueue(e,t)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(e,t){this.$allAtoms=this.$allAtoms.not(e),this.$filteredAtoms=this.$filteredAtoms.not(e);var n=this,r=function(){e.remove(),t&&t.call(n.element)};e.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:e,style:this.options.hiddenStyle}),this._sort(),this.reLayout(r)):r()},shuffle:function(e){this.updateSortData(this.$allAtoms),this.options.sortBy="random",this._sort(),this.reLayout(e)},destroy:function(){var e=this.usingTransforms,t=this.options;this.$allAtoms.removeClass(t.hiddenClass+" "+t.itemClass).each(function(){var t=this.style;t.position="",t.top="",t.left="",t.opacity="",e&&(t[a]="")});var n=this.element[0].style;for(var r in this.originalStyle)n[r]=this.originalStyle[r];this.element.unbind(".isotope").undelegate("."+t.hiddenClass,"click").removeClass(t.containerClass).removeData("isotope"),E.unbind(".isotope")},_getSegments:function(e){var t=this.options.layoutMode,n=e?"rowHeight":"columnWidth",r=e?"height":"width",i=e?"rows":"cols",o=this.element[r](),u,a=this.options[t]&&this.options[t][n]||this.$filteredAtoms["outer"+s(r)](!0)||o;u=Math.floor(o/a),u=Math.max(u,1),this[t][i]=u,this[t][n]=a},_checkIfSegmentsChanged:function(e){var t=this.options.layoutMode,n=e?"rows":"cols",r=this[t][n];return this._getSegments(e),this[t][n]!==r},_masonryReset:function(){this.masonry={},this._getSegments();var e=this.masonry.cols;this.masonry.colYs=[];while(e--)this.masonry.colYs.push(0)},_masonryLayout:function(e){var n=this,r=n.masonry;e.each(function(){var e=t(this),i=Math.ceil(e.outerWidth(!0)/r.columnWidth);i=Math.min(i,r.cols);if(i===1)n._masonryPlaceBrick(e,r.colYs);else{var s=r.cols+1-i,o=[],u,a;for(a=0;a<s;a++)u=r.colYs.slice(a,a+i),o[a]=Math.max.apply(Math,u);n._masonryPlaceBrick(e,o)}})},_masonryPlaceBrick:function(e,t){var n=Math.min.apply(Math,t),r=0;for(var i=0,s=t.length;i<s;i++)if(t[i]===n){r=i;break}var o=this.masonry.columnWidth*r,u=n;this._pushPosition(e,o,u);var a=n+e.outerHeight(!0),f=this.masonry.cols+1-s;for(i=0;i<f;i++)this.masonry.colYs[r+i]=a},_masonryGetContainerSize:function(){var e=Math.max.apply(Math,this.masonry.colYs);return{height:e}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(e){var n=this,r=this.element.width(),i=this.fitRows;e.each(function(){var e=t(this),s=e.outerWidth(!0),o=e.outerHeight(!0);i.x!==0&&s+i.x>r&&(i.x=0,i.y=i.height),n._pushPosition(e,i.x,i.y),i.height=Math.max(i.y+o,i.height),i.x+=s})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(e){var n=this,r=this.cellsByRow;e.each(function(){var e=t(this),i=r.index%r.cols,s=Math.floor(r.index/r.cols),o=(i+.5)*r.columnWidth-e.outerWidth(!0)/2,u=(s+.5)*r.rowHeight-e.outerHeight(!0)/2;n._pushPosition(e,o,u),r.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(e){var n=this;e.each(function(e){var r=t(this);n._pushPosition(r,0,n.straightDown.y),n.straightDown.y+=r.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var e=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(e--)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(e){var n=this,r=n.masonryHorizontal;e.each(function(){var e=t(this),i=Math.ceil(e.outerHeight(!0)/r.rowHeight);i=Math.min(i,r.rows);if(i===1)n._masonryHorizontalPlaceBrick(e,r.rowXs);else{var s=r.rows+1-i,o=[],u,a;for(a=0;a<s;a++)u=r.rowXs.slice(a,a+i),o[a]=Math.max.apply(Math,u);n._masonryHorizontalPlaceBrick(e,o)}})},_masonryHorizontalPlaceBrick:function(e,t){var n=Math.min.apply(Math,t),r=0;for(var i=0,s=t.length;i<s;i++)if(t[i]===n){r=i;break}var o=n,u=this.masonryHorizontal.rowHeight*r;this._pushPosition(e,o,u);var a=n+e.outerWidth(!0),f=this.masonryHorizontal.rows+1-s;for(i=0;i<f;i++)this.masonryHorizontal.rowXs[r+i]=a},_masonryHorizontalGetContainerSize:function(){var e=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:e}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(e){var n=this,r=this.element.height(),i=this.fitColumns;e.each(function(){var e=t(this),s=e.outerWidth(!0),o=e.outerHeight(!0);i.y!==0&&o+i.y>r&&(i.x=i.width,i.y=0),n._pushPosition(e,i.x,i.y),i.width=Math.max(i.x+s,i.width),i.y+=o})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(e){var n=this,r=this.cellsByColumn;e.each(function(){var e=t(this),i=Math.floor(r.index/r.rows),s=r.index%r.rows,o=(i+.5)*r.columnWidth-e.outerWidth(!0)/2,u=(s+.5)*r.rowHeight-e.outerHeight(!0)/2;n._pushPosition(e,o,u),r.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(e){var n=this;e.each(function(e){var r=t(this);n._pushPosition(r,n.straightAcross.x,0),n.straightAcross.x+=r.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}},t.fn.imagesLoaded=function(e){function n(){e.call(i,s)}function r(e){var i=e.target;i.src!==u&&t.inArray(i,a)===-1&&(a.push(i),--o<=0&&(setTimeout(n),s.unbind(".imagesLoaded",r)))}var i=this,s=i.find("img").add(i.filter("img")),o=s.length,u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",a=[];return o||n(),s.bind("load.imagesLoaded error.imagesLoaded",r).each(function(){var e=this.src;this.src=u,this.src=e}),i};var S=function(t){e.console&&e.console.error(t)};t.fn.isotope=function(e,n){if(typeof e=="string"){var r=Array.prototype.slice.call(arguments,1);this.each(function(){var n=t.data(this,"isotope");if(!n){S("cannot call methods on isotope prior to initialization; attempted to call method '"+e+"'");return}if(!t.isFunction(n[e])||e.charAt(0)==="_"){S("no such method '"+e+"' for isotope instance");return}n[e].apply(n,r)})}else this.each(function(){var r=t.data(this,"isotope");r?(r.option(e),r._init(n)):t.data(this,"isotope",new t.Isotope(e,this,n))});return this}})(window,jQuery);(function(e,t,n){function r(n,r,i){var s=t.createElement(n);return r&&(s.id=Q+r),i&&(s.style.cssText=i),e(s)}function i(e){var t=E.length,n=(I+e)%t;return 0>n?t+n:n}function s(e,t){return Math.round((/%/.test(e)?("x"===t?S.width():S.height())/100:1)*parseInt(e,10))}function o(e){return D.photo||/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i.test(e)}function u(){var t,n=e.data(F,K);null==n?(D=e.extend({},J),console&&console.log&&console.log("Error: cboxElement missing settings object")):D=e.extend({},n);for(t in D)e.isFunction(D[t])&&"on"!==t.slice(0,2)&&(D[t]=D[t].call(F));D.rel=D.rel||F.rel||e(F).data("rel")||"nofollow",D.href=D.href||e(F).attr("href"),D.title=D.title||F.title,"string"==typeof D.href&&(D.href=e.trim(D.href))}function a(n,r){e(t).trigger(n),ut.trigger(n),e.isFunction(r)&&r.call(F)}function f(){var e,t,n,r,i,s=Q+"Slideshow_",o="click."+Q;D.slideshow&&E[1]?(t=function(){clearTimeout(e)},n=function(){(D.loop||E[I+1])&&(e=setTimeout(X.next,D.slideshowSpeed))},r=function(){L.html(D.slideshowStop).unbind(o).one(o,i),ut.bind(et,n).bind(Z,t).bind(tt,i),d.removeClass(s+"off").addClass(s+"on")},i=function(){t(),ut.unbind(et,n).unbind(Z,t).unbind(tt,i),L.html(D.slideshowStart).unbind(o).one(o,function(){X.next(),r()}),d.removeClass(s+"on").addClass(s+"off")},D.slideshowAuto?r():i()):d.removeClass(s+"off "+s+"on")}function l(t){z||(F=t,u(),E=e(F),I=0,"nofollow"!==D.rel&&(E=e("."+G).filter(function(){var t,n=e.data(this,K);return n&&(t=e(this).data("rel")||n.rel||this.rel),t===D.rel}),I=E.index(F),-1===I&&(E=E.add(F),I=E.length-1)),R||(R=U=!0,d.css({visibility:"hidden",display:"block"}),x=r(at,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(m),P=g.height()+w.height()+m.outerHeight(!0)-m.height(),H=y.width()+b.width()+m.outerWidth(!0)-m.width(),B=x.outerHeight(!0),j=x.outerWidth(!0),D.returnFocus&&(e(F).blur(),ut.one(nt,function(){e(F).focus()})),p.css({opacity:parseFloat(D.opacity),cursor:D.overlayClose?"pointer":"auto",visibility:"visible"}).show(),D.w=s(D.initialWidth,"x"),D.h=s(D.initialHeight,"y"),X.position(),st&&S.bind("resize."+ot+" scroll."+ot,function(){p.css({width:S.width(),height:S.height(),top:S.scrollTop(),left:S.scrollLeft()})}).trigger("resize."+ot),f(),a(Y,D.onOpen),_.add(C).hide(),M.html(D.close).show()),X.load(!0))}function c(){!d&&t.body&&($=!1,S=e(n),d=r(at).attr({id:K,"class":it?Q+(st?"IE6":"IE"):""}).hide(),p=r(at,"Overlay",st?"position:absolute":"").hide(),N=r(at,"LoadingOverlay").add(r(at,"LoadingGraphic")),v=r(at,"Wrapper"),m=r(at,"Content").append(C=r(at,"Title"),k=r(at,"Current"),A=r(at,"Next"),O=r(at,"Previous"),L=r(at,"Slideshow"),M=r(at,"Close")),v.append(r(at).append(r(at,"TopLeft"),g=r(at,"TopCenter"),r(at,"TopRight")),r(at,!1,"clear:left").append(y=r(at,"MiddleLeft"),m,b=r(at,"MiddleRight")),r(at,!1,"clear:left").append(r(at,"BottomLeft"),w=r(at,"BottomCenter"),r(at,"BottomRight"))).find("div div").css({"float":"left"}),T=r(at,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),_=A.add(O).add(k).add(L),e(t.body).append(p,d.append(v,T)))}function h(){function n(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),l(this))}return d?($||($=!0,A.click(function(){X.next()}),O.click(function(){X.prev()}),M.click(function(){X.close()}),p.click(function(){D.overlayClose&&X.close()}),e(t).bind("keydown."+Q,function(e){var t=e.keyCode;R&&D.escKey&&27===t&&(e.preventDefault(),X.close()),R&&D.arrowKey&&E[1]&&(37===t?(e.preventDefault(),O.click()):39===t&&(e.preventDefault(),A.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+Q,"."+G,n):e("."+G).live("click."+Q,n)),!0):!1}var p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},K="colorbox",Q="cbox",G=Q+"Element",Y=Q+"_open",Z=Q+"_load",et=Q+"_complete",tt=Q+"_cleanup",nt=Q+"_closed",rt=Q+"_purge",it=!e.support.leadingWhitespace,st=it&&!n.XMLHttpRequest,ot=Q+"_IE6",ut=e({}),at="div";e.colorbox||(e(c),X=e.fn[K]=e[K]=function(t,n){var r=this;if(t=t||{},c(),h()){if(e.isFunction(r))r=e("<a/>"),t.open=!0;else if(!r[0])return r;n&&(t.onComplete=n),r.each(function(){e.data(this,K,e.extend({},e.data(this,K)||J,t))}).addClass(G),(e.isFunction(t.open)&&t.open.call(r)||t.open)&&l(r[0])}return r},X.position=function(e,t){function n(e){g[0].style.width=w[0].style.width=m[0].style.width=parseInt(e.style.width,10)-H+"px",m[0].style.height=y[0].style.height=b[0].style.height=parseInt(e.style.height,10)-P+"px"}var r,i,o,u=0,a=0,f=d.offset();S.unbind("resize."+Q),d.css({top:-9e4,left:-9e4}),i=S.scrollTop(),o=S.scrollLeft(),D.fixed&&!st?(f.top-=i,f.left-=o,d.css({position:"fixed"})):(u=i,a=o,d.css({position:"absolute"})),a+=D.right!==!1?Math.max(S.width()-D.w-j-H-s(D.right,"x"),0):D.left!==!1?s(D.left,"x"):Math.round(Math.max(S.width()-D.w-j-H,0)/2),u+=D.bottom!==!1?Math.max(S.height()-D.h-B-P-s(D.bottom,"y"),0):D.top!==!1?s(D.top,"y"):Math.round(Math.max(S.height()-D.h-B-P,0)/2),d.css({top:f.top,left:f.left,visibility:"visible"}),e=d.width()===D.w+j&&d.height()===D.h+B?0:e||0,v[0].style.width=v[0].style.height="9999px",r={width:D.w+j+H,height:D.h+B+P,top:u,left:a},0===e&&d.css(r),d.dequeue().animate(r,{duration:e,complete:function(){n(this),U=!1,v[0].style.width=D.w+j+H+"px",v[0].style.height=D.h+B+P+"px",D.reposition&&setTimeout(function(){S.bind("resize."+Q,X.position)},1),t&&t()},step:function(){n(this)}})},X.resize=function(e){R&&(e=e||{},e.width&&(D.w=s(e.width,"x")-j-H),e.innerWidth&&(D.w=s(e.innerWidth,"x")),x.css({width:D.w}),e.height&&(D.h=s(e.height,"y")-B-P),e.innerHeight&&(D.h=s(e.innerHeight,"y")),e.innerHeight||e.height||(x.css({height:"auto"}),D.h=x.height()),x.css({height:D.h}),X.position("none"===D.transition?0:D.speed))},X.prep=function(t){function n(){return D.w=D.w||x.width(),D.w=D.mw&&D.mw<D.w?D.mw:D.w,D.w}function s(){return D.h=D.h||x.height(),D.h=D.mh&&D.mh<D.h?D.mh:D.h,D.h}if(R){var u,f="none"===D.transition?0:D.speed;x.empty().remove(),x=r(at,"LoadedContent").append(t),x.hide().appendTo(T.show()).css({width:n(),overflow:D.scrolling?"auto":"hidden"}).css({height:s()}).prependTo(m),T.hide(),e(q).css({"float":"none"}),u=function(){function t(){it&&d[0].style.removeAttribute("filter")}var n,s,u=E.length,l="frameBorder",c="allowTransparency";R&&(s=function(){clearTimeout(W),N.remove(),a(et,D.onComplete)},it&&q&&x.fadeIn(100),C.html(D.title).add(x).show(),u>1?("string"==typeof D.current&&k.html(D.current.replace("{current}",I+1).replace("{total}",u)).show(),A[D.loop||u-1>I?"show":"hide"]().html(D.next),O[D.loop||I?"show":"hide"]().html(D.previous),D.slideshow&&L.show(),D.preloading&&e.each([i(-1),i(1)],function(){var t,n,r=E[this],i=e.data(r,K);i&&i.href?(t=i.href,e.isFunction(t)&&(t=t.call(r))):t=r.href,o(t)&&(n=new Image,n.src=t)})):_.hide(),D.iframe?(n=r("iframe")[0],l in n&&(n[l]=0),c in n&&(n[c]="true"),D.scrolling||(n.scrolling="no"),e(n).attr({src:D.href,name:(new Date).getTime(),"class":Q+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",s).appendTo(x),ut.one(rt,function(){n.src="//about:blank"}),D.fastIframe&&e(n).trigger("load")):s(),"fade"===D.transition?d.fadeTo(f,1,t):t())},"fade"===D.transition?d.fadeTo(f,0,function(){X.position(0,u)}):X.position(f,u)}},X.load=function(t){var n,i,f,l=X.prep;U=!0,q=!1,F=E[I],t||u(),V&&d.add(p).removeClass(V),D.className&&d.add(p).addClass(D.className),V=D.className,a(rt),a(Z,D.onLoad),D.h=D.height?s(D.height,"y")-B-P:D.innerHeight&&s(D.innerHeight,"y"),D.w=D.width?s(D.width,"x")-j-H:D.innerWidth&&s(D.innerWidth,"x"),D.mw=D.w,D.mh=D.h,D.maxWidth&&(D.mw=s(D.maxWidth,"x")-j-H,D.mw=D.w&&D.w<D.mw?D.w:D.mw),D.maxHeight&&(D.mh=s(D.maxHeight,"y")-B-P,D.mh=D.h&&D.h<D.mh?D.h:D.mh),n=D.href,W=setTimeout(function(){N.appendTo(m)},100),D.inline?(f=r(at).hide().insertBefore(e(n)[0]),ut.one(rt,function(){f.replaceWith(x.children())}),l(e(n))):D.iframe?l(" "):D.html?l(D.html):o(n)?(e(q=new Image).addClass(Q+"Photo").bind("error",function(){D.title=!1,l(r(at,"Error").html(D.imgError))}).one("load",function(){var e;D.scalePhotos&&(i=function(){q.height-=q.height*e,q.width-=q.width*e},D.mw&&q.width>D.mw&&(e=(q.width-D.mw)/q.width,i()),D.mh&&q.height>D.mh&&(e=(q.height-D.mh)/q.height,i())),D.h&&(q.style.marginTop=Math.max(D.h-q.height,0)/2+"px"),E[1]&&(D.loop||E[I+1])&&(q.style.cursor="pointer",q.onclick=function(){X.next()}),it&&(q.style.msInterpolationMode="bicubic"),setTimeout(function(){l(q)},1)}),setTimeout(function(){q.src=n},1)):n&&T.load(n,D.data,function(t,n){l("error"===n?r(at,"Error").html(D.xhrError):e(this).contents())})},X.next=function(){!U&&E[1]&&(D.loop||E[I+1])&&(I=i(1),X.load())},X.prev=function(){!U&&E[1]&&(D.loop||I)&&(I=i(-1),X.load())},X.close=function(){R&&!z&&(z=!0,R=!1,a(tt,D.onCleanup),S.unbind("."+Q+" ."+ot),p.fadeTo(200,0),d.stop().fadeTo(300,0,function(){d.add(p).css({opacity:1,cursor:"auto"}).hide(),a(rt),x.empty().remove(),setTimeout(function(){z=!1,a(nt,D.onClosed)},1)}))},X.remove=function(){e([]).add(d).add(p).remove(),d=null,e("."+G).removeData(K).removeClass(G),e(t).unbind("click."+Q)},X.element=function(){return e(F)},X.settings=J)})(jQuery,document,window);